__NUXT_JSONP__("/blog/2015-08-25-renfe-project", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X){return {data:[{article:{slug:"2015-08-25-renfe-project",description:"Hace unos días me propuse hacer un mapa dinámico con CartoDB en el que se\nmostraran los trenes de RENFE moviéndose con la intención de probar la herramienta y experimentar\ncon sus posibilidades. El caso es que el proyecto crece, los datos no están tan disponibles como\nuno quisiera y empiezan a aparecer los famosos \"ya que...\".",lang:A,title:"RENFE -- Mapa dinámico de circulaciones",date:"2015-08-25T00:00:00.000Z",author:m,category:"Projects",tags:["renfe","railway","geo","cartodb"],toc:[{id:B,depth:v,text:C},{id:D,depth:v,text:E},{id:F,depth:G,text:H},{id:I,depth:G,text:J},{id:K,depth:v,text:L}],body:{type:w,children:[{type:b,tag:d,props:{},children:[{type:a,value:M},{type:b,tag:e,props:{href:N,rel:[g,h,i],target:j},children:[{type:a,value:O}]},{type:a,value:P},{type:b,tag:Q,props:{},children:[{type:a,value:R}]},{type:a,value:x}]},{type:a,value:c},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Durante la recogida de datos para este mapa surgen algunas ideas relacionadas como la construcción\nde un grafo con la infraestructura de transporte para realizar análisis que permitan optimizar\ncostes, tiempos, o estudiar problemas en la infraestructura. Es de imaginar que ADIF dispone de\nalgo parecido y lo utiliza, así que el objetivo es fundamentalmente exploratorio para empezar a\nestudiar sistemas de transporte "},{type:b,tag:"sup",props:{id:"fnref-1"},children:[{type:b,tag:e,props:{href:"#fn-1",className:["footnote-ref"]},children:[{type:a,value:"1"}]}]},{type:a,value:x}]},{type:a,value:c},{type:b,tag:y,props:{id:B},children:[{type:b,tag:e,props:{href:"#ideas-previas",ariaHidden:n,tabIndex:o},children:[{type:b,tag:p,props:{className:[q,r]},children:[]}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Como siempre lo primero es buscar un poco por Internet para ver quién ha hecho algo ya y, como siempre,\nsin necesidad de bucear demasiado, aparecen algunos buenos resultados:"}]},{type:a,value:c},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:c},{type:b,tag:"content-twitter-user",props:{user:S},children:[{type:a,value:"\nVictoriano\n"}]},{type:a,value:"\n tiene un mapa donde muestra\nlos \n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fvictoriano-v21.cartodb.com\u002Fviz\u002Faac847aa-e882-11e2-bc2b-d90ab36db2dd\u002Fpublic_map",rel:[g,h,i],target:j},children:[{type:a,value:"trenes de larga distancia en 2013"}]},{type:a,value:"\n (ver imagen más abajo),\nsin embargo no es exactamente lo que busco. De todos modos, una pena que los datasets sean privados.\n"},{type:b,tag:t,props:{src:"\u002Fimg\u002F2015\u002Frenfe-stations-victoriano.png",alt:"Renfe - Trenes de larga distancia 2013",caption:"Trenes de larga distancia 2013. Los puntos naranjas son la estaciones según el nº de trenes que salen de esa estación.\nEl azul es el nº de conexiones posibles con billete único que vende Renfe en viaje directo\no con transbordo. Autor: Victoriano"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Buscando un poco más encontramos los mapas de "},{type:b,tag:e,props:{href:"https:\u002F\u002Fastroide.cartodb.com\u002Fmaps",rel:[g,h,i],target:j},children:[{type:a,value:"Astroide"}]},{type:a,value:", otro usuario de CartoDB que nos ofrece unos\nmapas mucho más interesantes para lo que quiero hacer, y que además ofrece públicamente los\ndatasets: un mapa dinámico con los "},{type:b,tag:e,props:{href:"https:\u002F\u002Fastroide.cartodb.com\u002Fviz\u002F83f346cc-18bc-11e5-a62d-0e9d821ea90d\u002Fpublic_map",rel:[g,h,i],target:j},children:[{type:a,value:"trenes de largo recorrido"}]},{type:a,value:"\ny otro con los "},{type:b,tag:e,props:{href:"https:\u002F\u002Fastroide.cartodb.com\u002Fviz\u002F5b6b5838-1aa7-11e5-858b-0e018d66dc29\u002Fpublic_map",rel:[g,h,i],target:j},children:[{type:a,value:"trenes de mercancias"}]},{type:a,value:",\nque reproduzco a continuación:"}]},{type:a,value:c},{type:b,tag:t,props:{src:"\u002Fimg\u002F2015\u002Frenfe-stations-astroide-largadistancia.png",alt:"Renfe - Trenes de larga distancia",caption:"Trenes de Larga Distancia. Recorrido efectuado por trenes de Larga Distancia. Estudio del uso de bases de datos NoSQL en\nla Fundación de los Ferrocarriles Españoles. Autor: Astroide"},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:t,props:{src:"\u002Fimg\u002F2015\u002Frenfe-stations-astroide-mercancias.png",alt:"Renfe - Trenes de mercancias",caption:"Trenes de mercancías. Reconstrucción del movimiento de los trenes de mercancías. Estudio del uso de bases de datos NoSQL en\nla Fundación de los Ferrocarriles Españoles. Autor: Astroide"},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Estos dos mapas son públicos y los datasets pueden descargarse, uno de ellos me será de muchísima\nutilidad: la información con las líneas de la infraestructura, ¿están todas las líneas activas? Por\nsi acaso contacto con el usuario para confirmarlo y para saber si puede también proporcionarme los\ndatos de las líneas desmanteladas que ya no están operativas."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Los mapas de Astroide muestran básicamente el resultado al que quiero llegar, pero el problema que\nme planteo no es tanto obtener el mapa como disfrutar del camino hasta conseguirlo. Además, echo de\nmenos los trenes de media distancia y regionales, ¡y las estaciones!. Me pregunto: ¿cómo quedará el\nmapa si se combinan todos estos trenes en una única visualización y mostramos también las estaciones?"}]},{type:a,value:c},{type:b,tag:y,props:{id:D},children:[{type:b,tag:e,props:{href:"#definici%C3%B3n-del-problema",ariaHidden:n,tabIndex:o},children:[{type:b,tag:p,props:{className:[q,r]},children:[]}]},{type:a,value:E}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"El reto sigue presente a pesar de los recursos que se han encontrado: para realizar mi mapa dinámico con\nlas circulaciones de trenes necesito posicionar las estaciones, conseguir los horarios de los trenes y\nluego muestrear su posición a lo largo de un día o de una semana para mostrarlos en el mapa."}]},{type:a,value:c},{type:b,tag:T,props:{id:F},children:[{type:b,tag:e,props:{href:"#la-infraestructura-estaciones-y-l%C3%ADneas",ariaHidden:n,tabIndex:o},children:[{type:b,tag:p,props:{className:[q,r]},children:[]}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Uno de los primeros pasos que me propongo dar es crear un mapa estático con la infraestructura, básicamente\nreproducir la capa de ferrocarriles que supongo que estará disponible en muchos GIS. Para ello necesito:"}]},{type:a,value:c},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"los recorridos de las líneas ("},{type:b,tag:k,props:{to:U},children:[{type:a,value:l}]},{type:a,value:"), y"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"la posición de las estaciones ("},{type:b,tag:k,props:{to:V},children:[{type:a,value:l}]},{type:a,value:s}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En la infraestructura quiero mostrar tanto las líneas que actualmente están en funcionamiento como las\nlíneas que ya han sido desmanteladas. Asimismo quiero diferenciar por colores según los anchos (FEVE,\nmétrico, internacional, ibérico) y también identificar qué tramos están electrificados."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En cuanto a las estaciones, el objetivo será mostrar en el mapa la posición de todos los edificios\nque hayan ofrecido este servicio. Podrían categorizarse en función de las prestaciones de cada uno\nde ellos: accesibilidad, área comercial,..."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Una vez que tenga disponibles estos datos visuales, el objetivo será crear un "},{type:b,tag:"strong",props:{},children:[{type:a,value:"grafo de la infraestructura\ndonde los nodos sea estaciones o bifurcaciones y los arcos estén formados por los itinerarios"}]},{type:a,value:". Gracias\na este grafo se podrán reconstruir las circulaciones de trenes entre estaciones no contiguas, analizar la\ndemanda de la infraestructura, las consecuencias de fallos en el servicio, alternativas de recuperación, etc.\nNo obstante, su construcción resulta compleja, tal y como se mostrará en el artículo correspondiente."}]},{type:a,value:c},{type:b,tag:t,props:{src:"\u002Fimg\u002F2015\u002Fjgraph-transport-system.png",alt:"Visualización de un sistema de transporte sobre el mapa de Europa",caption:"Visualización como grafo de una red de transporte sobre el mapa de Europa. Fuente: JGraphX User Manual (https:\u002F\u002Fjgraph.github.io\u002Fmxgraph\u002Fdocs\u002Fmanual_javavis.html)."},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:T,props:{id:I},children:[{type:b,tag:e,props:{href:"#circulaciones-de-trenes",ariaHidden:n,tabIndex:o},children:[{type:b,tag:p,props:{className:[q,r]},children:[]}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"El otro elemento del mapa son los datos de explotación de la infraestructura: la circulación de los\ntrenes. Necesito obtener los horarios de todos ellos (estaciones, hora de salida y llegada,...)\npara poder identificar en qué lugar se encuentran en cada momento."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"RENFE no ofrece esta información de una forma amigable a través de algún tipo de API, tampoco es una\ninformación que haya encontrado en alguna web de la administración como "},{type:b,tag:e,props:{href:"http:\u002F\u002Fdatos.gob.es\u002F",rel:[g,h,i],target:j},children:[{type:a,value:"datos.gob.es"}]},{type:a,value:", así que\nhabrá que obtenerlos de alguna otra manera (scraping)."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Estos datos de los trenes se podrán combinar con los datos del grafo de la infraestructura (y\nayudarán también a construirlo) para generar el mapa dinámico pretendido. Además,\nla información disponible de esta manera permitirá realizar diferentes estudios."}]},{type:a,value:c},{type:b,tag:y,props:{id:K},children:[{type:b,tag:e,props:{href:"#m%C3%A1s-sobre-el-proyecto",ariaHidden:n,tabIndex:o},children:[{type:b,tag:p,props:{className:[q,r]},children:[]}]},{type:a,value:L}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"El proyecto se desarrolla en los siguientes artículos:"}]},{type:a,value:c},{type:b,tag:z,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Mapa dinámico de circulaciones ("},{type:b,tag:k,props:{to:"\u002Fblog\u002F2015-08-25-renfe-project"},children:[{type:a,value:l}]},{type:a,value:s}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Geolocalización de estaciones (ADIF) ("},{type:b,tag:k,props:{to:V},children:[{type:a,value:l}]},{type:a,value:s}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"La infraestructura ferroviaria (ADIF) ("},{type:b,tag:k,props:{to:U},children:[{type:a,value:l}]},{type:a,value:s}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Circulaciones de trenes (RENFE) ("},{type:b,tag:k,props:{to:"\u002Fblog\u002F2015-09-01-renfe-project-trains"},children:[{type:a,value:l}]},{type:a,value:s}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:"div",props:{className:["footnotes"]},children:[{type:a,value:c},{type:b,tag:"hr",props:{},children:[]},{type:a,value:c},{type:b,tag:"ol",props:{},children:[{type:a,value:c},{type:b,tag:f,props:{id:"fn-1"},children:[{type:a,value:"Andrew Sherratt, 2005. Portages. "},{type:b,tag:e,props:{href:W,rel:[g,h,i],target:j},children:[{type:a,value:W}]},{type:b,tag:e,props:{href:"#fnref-1",className:["footnote-backref"]},children:[{type:a,value:"↩"}]}]},{type:a,value:c}]},{type:a,value:c}]}]},excerpt:{type:w,children:[{type:b,tag:d,props:{},children:[{type:a,value:M},{type:b,tag:e,props:{href:N,rel:[g,h,i],target:j},children:[{type:a,value:O}]},{type:a,value:P},{type:b,tag:Q,props:{},children:[{type:a,value:R}]},{type:a,value:x}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F2015-08-25-renfe-project",extension:X,createdAt:u,updatedAt:u},prev:{slug:"2015-08-25-fuzzy-string-comparison",title:"Comparación inexacta de cadenas"},next:{slug:"2015-08-25-trilateration-with-errors",title:"Trilateración con error"}}],fetch:{"0":{owner:{slug:m,lang:A,name:"Javier G. Sogo",role:"Software developer",bio:"May the forc++ be with you",image:"\u002Fimg\u002Fjavi.jpeg",social:{github:m,twitter:m,linkedin:m},toc:[],body:{type:w,children:[]},dir:"\u002Fauthors",path:"\u002Fauthors\u002Fjgsogo",extension:X,createdAt:u,updatedAt:u},showModal:false,tweet_text:"Hey @jgsogo! I've read https:\u002F\u002Fjgsogo.es\u002Fblog\u002F2015-08-25-renfe-project and want to..."},"user-card:0":{info:{username:S}}},mutations:void 0}}("text","element","\n","p","a","li","nofollow","noopener","noreferrer","_blank","nuxt-link","ver artículo","jgsogo","true",-1,"span","icon","icon-link",").","article-image","2021-11-17T09:47:44.593Z",2,"root",".","h2","ul","es","ideas-previas","Ideas previas","definición-del-problema","Definición del problema","la-infraestructura-estaciones-y-líneas",3,"La infraestructura: estaciones y líneas","circulaciones-de-trenes","Circulaciones de trenes","más-sobre-el-proyecto","Más sobre el proyecto","Hace unos días me propuse hacer un mapa dinámico con ","https:\u002F\u002Fcartodb.com\u002F","CartoDB"," en el que se\nmostraran los trenes de RENFE moviéndose con la intención de probar la herramienta y experimentar\ncon sus posibilidades. El caso es que el proyecto crece, los datos no están tan disponibles como\nuno quisiera y empiezan a aparecer los famosos ","em","\"ya que...\"","victorianoi","h3","\u002Fblog\u002F2015-08-31-renfe-project-lines","\u002Fblog\u002F2015-08-27-renfe-project-stations","http:\u002F\u002Fwww.archatlas.org\u002FPortages\u002FPortages.php",".md")));